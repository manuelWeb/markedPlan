<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Marked in the browser</title>
  <link rel="stylesheet" href="assets/styles/github.css">
  <script src="assets/scripts/marked.min.js"></script>
  <!-- <script src="bundle.js"></script> -->
  <!-- <link rel="stylesheet" href="markdown.css"> -->
</head>

<body>
  <input type="file" onchange="readText(this)" />
  <div id="main"></div>
  <script type="text/javascript">
  var reader = new FileReader();

  function readText(that) {

    if (that.files && that.files[0]) {
      var reader = new FileReader();
      reader.onload = function(e) {
        var output = e.target.result;
        document.getElementById('main').classList.add('markdown-body')

        //process text to show only lines with "@":             
        // output = output.split("\n").filter(/./.test, /\@/).join("\n");

        // document.getElementById('main').innerHTML = output;
        document.getElementById('main').innerHTML = marked(output);
      }; //end onload()
      reader.readAsText(that.files[0]);
    } //end if html5 filelist support
  }
  </script>
  <div id="content" class="markdown-body"></div>
  <script>
  marked.setOptions({});

  var monmd = '';
  var url = "file:///C:/Users/mdevries/Desktop/dl2018.md"
  var url = "./dl2018.md"

  function reqListener() {
    monmd = this.responseText;
    // console.log(monmd)
    document.getElementById('content').innerHTML = marked(monmd);
  }

  var xobj = new XMLHttpRequest();
  xobj.overrideMimeType("application/json");
  xobj.addEventListener("load", reqListener);
  xobj.open("GET", url);
  xobj.send();


  // Check for the various File API support.
  if (window.File && window.FileReader && window.FileList && window.Blob) {
    // Great success! All the File APIs are supported.
  } else {
    alert('The File APIs are not fully supported in this browser.');
  }
  var reader = new FileReader();

  // document.getElementById('content').innerHTML = marked(monmd);
  // marked('# Marked in browser\n\nRendered by **marked**.');
  /*$(document).ready(function() {

  })*/
  // fs = require('fs')
  </script>
</body>

</html>