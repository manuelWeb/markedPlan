<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
  <title>Filereader</title>
</head>

<body>

  <input type="file" onchange="readText(this)" />
  <div id="main"></div>

  <script type="text/javascript">
  var reader = new FileReader();

  function readText(that) {

    if (that.files && that.files[0]) {
      var reader = new FileReader();
      reader.onload = function(e) {
        var output = e.target.result;
        document.getElementById('main').classList.add('markdown-body')

        //process text to show only lines with "@":             
        // output = output.split("\n").filter(/./.test, /\@/).join("\n");

        // document.getElementById('main').innerHTML = output;
        document.getElementById('main').innerHTML = marked(output);
      }; //end onload()
      reader.readAsText(that.files[0]);
    } //end if html5 filelist support
  }
  </script>

</body>
</html>